
# Äá»“ Ã¡n mÃ´n kiá»ƒm thá»­ pháº§n má»m

## ThÃ´ng tin chung
- **TÃªn Ä‘á» tÃ i:** [TÃªn Ä‘á» tÃ i cáº§n Ä‘Æ°á»£c thÃªm vÃ o]
- **MÃ´n há»c:** Kiá»ƒm thá»­ pháº§n má»m
- **Lá»›p:** [DCT122C3]

## ThÃ nh viÃªn nhÃ³m
1. Trá»‹nh Long PhÃ¡t
2. LÃª Há»“ng PhÃ¡t 
3. TrÆ°Æ¡ng PhÃº Kiá»‡t
4. TrÃ  Äá»©c ToÃ n

## MÃ´ táº£ dá»± Ã¡n
[ThÃªm mÃ´ táº£ ngáº¯n vá» dá»± Ã¡n vÃ  má»¥c tiÃªu]

## CÃ´ng nghá»‡ sá»­ dá»¥ng
- [Liá»‡t kÃª cÃ¡c cÃ´ng nghá»‡/framework Ä‘Æ°á»£c sá»­ dá»¥ng]

## Cáº¥u trÃºc dá»± Ã¡n
```
project/
â”œâ”€â”€ src/
â”œâ”€â”€ tests/
â”œâ”€â”€ docs/
â””â”€â”€ README.md
```

## HÆ°á»›ng dáº«n cÃ i Ä‘áº·t
1. Clone repository
2. [CÃ¡c bÆ°á»›c cÃ i Ä‘áº·t]

## HÆ°á»›ng dáº«n cháº¡y test
[ThÃªm hÆ°á»›ng dáº«n Ä‘á»ƒ cháº¡y cÃ¡c test case]

<h2>XÃ¢y dá»±ng Website bÃ¡n quáº§n Ã¡o sá»­ dá»¥ng cÃ´ng nghá»‡ ReactJS & NodeJS ( API,Socket )</h2>
<h3>MÃ´ táº£ chung , giá»›i thiá»‡u Ä‘á» tÃ i </h3>
<b>NgÃ y nay , cÃ´ng nghá»‡ thÃ´ng tin Ä‘Ã£ cÃ³ nhá»¯ng bÆ°á»›c phÃ¡t triá»ƒn máº¡nh máº½ trong má»i phÆ°Æ¡ng diá»‡n nÃ³i chung vÃ­ dá»¥ nhÆ° : Ä‘á»i sá»‘ng , cÃ´ng viá»‡c , giáº£i trÃ­ , truyá»n thÃ´ng , ... VÃ  riÃªng vá»›i bÃ¡n hÃ ng , so vá»›i cÃ¡ch bÃ¡n truyá»n thá»‘ng thÃ¬ nay doanh nghiá»‡p , cá»­a hÃ ng nhá» láº» nÃ o cÅ©ng cÃ³ má»™t website Ä‘á»ƒ quÃ¡ng bÃ¡ , bÃ¡n hÃ ng trá»±c tuyáº¿n sáº£n pháº©m vÃ  tÆ°Æ¡ng tÃ¡c vá»›i ngÆ°á»i dÃ¹ng . Náº¯m báº¯t Ä‘Æ°á»£c nhu cáº§u Ä‘Ã³ , nhÃ³m em quyáº¿t Ä‘á»‹nh thá»±c hiá»‡n Ä‘á» tÃ i : XÃ¢y dá»±ng Website bÃ¡n quáº§n Ã¡o sá»­ dá»¥ng cÃ´ng nghá»‡ ReactJS & NodeJS ( API,Socket ) . Khi sá»­ dá»¥ng trang web khÃ¡ch hÃ ng sáº½ cáº£m nháº­n Ä‘Æ°á»£c sá»± má»›i máº» vÃ  thuáº­n tiá»‡n cá»§a Website mang láº¡i . VÃ  website cÅ©ng dá»… dÃ ng cung cáº¥p thÃ´ng tin chi tiáº¿t sáº£n pháº©m giÃºp khÃ¡ch hÃ ng cÃ³ thá»ƒ thanh toÃ¡n trá»±c tiáº¿p qua paypal hoáº·c ship cod .</b>
<h3>Website bao gá»“m cÃ¡c chá»©c nÄƒng chÃ­nh: </h3>
    <b>- ThÃªm, XÃ³a, TÃ¬m Kiáº¿m, PhÃ¢n Trang, PhÃ¢n Loáº¡i Sáº£n Pháº©m </b> </br>
    <b>- Äáº·t HÃ ng </b> </br>
    <b>- Live Chat ( TÆ° Váº¥n KhÃ¡ch HÃ ng ) </b> </br>
    <b>- Gá»­i Email Ä‘á»ƒ xÃ¡c nháº­n Ä‘Æ¡n hÃ ng </b> </br>
    <b>- Thanh ToÃ¡n Paypal  </b> </br>
    <b>- Giao HÃ ng ( Hiá»ƒn thá»‹ vÃ  tÃ­nh giÃ¡ tiá»n cá»§a Ä‘Æ¡n hÃ ng phá»¥ thuá»™c vÃ o quáº£ng Ä‘Æ°á»ng tá»« cá»­a hÃ ng Ä‘áº¿n Ä‘á»‹a Ä‘iá»ƒm nháº­n hÃ ng cá»§a khÃ¡ch hÃ ng vÃ  hiá»ƒn thá»‹ báº±ng Google Map API )  </b> </br>


---------------------------------------------------------------

 
## Fear of God

![](https://thegioidohieu.com/images/feature_variant/17/fear-of-god-logo.jpg)


## Contributors
- TienKim
- QuocToan
- MinhHieu

## ERD
<img src="https://firebasestorage.googleapis.com/v0/b/todo-app-tienkim.appspot.com/o/diagram.PNG?alt=media&token=656d0b0c-0540-4257-a90a-3c024f50946b" />

## USECASE
<h3>* KhÃ¡ch HÃ ng</h3>
<img src="https://firebasestorage.googleapis.com/v0/b/todo-app-tienkim.appspot.com/o/KhachHang.PNG?alt=media&token=07f504bd-6d34-4da4-abe7-a82de78293d2" />

<h3>* NhÃ¢n ViÃªn BÃ¡n HÃ ng</h3>
<img src="https://firebasestorage.googleapis.com/v0/b/todo-app-tienkim.appspot.com/o/NhanVien.PNG?alt=media&token=a6f82edc-64fc-4086-bcd9-0ba490f213eb" />

<h3>* ADMIN</h3>
<img src="https://firebasestorage.googleapis.com/v0/b/todo-app-tienkim.appspot.com/o/Admin.PNG?alt=media&token=0e9b75b8-1720-402b-9f76-b64614fe7f12" />

## DESIGN DATABASE

- Product: _id, id_category, name_product, price_product, image, describe, gender, number
    + _id: id cá»§a sáº£n pháº©m,
    id_category: id cá»§a loáº¡i sáº£n pháº©m,
    name_product: tÃªn cá»§a sáº£n pháº©m,
    price_product: giÃ¡ cá»§a sáº£n pháº©m,
    image: hÃ¬nh áº£nh cá»§a sáº£n pháº©m,
    describe: mÃ´ táº£ vá» sáº£n pháº©m,
    gender: sáº£n pháº©m thuá»™c giá»›i tÃ­nh,
    number: sá»‘ lÆ°á»£ng tá»“n,
    báº£ng Product cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Category 
    báº£ng Product cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Favorite
    báº£ng Product cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Comment
    báº£ng Product cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Detail_Oder
    + 1 product sáº½ cÃ³ 1 category
    + 1 product sáº½ cÃ³ nhiá»u favorite
    + 1 product sáº½ cÃ³ nhiá»u comment
    + 1 product sáº½ cÃ³ 1 detail_order
- Category: _id, category
    + _id: id cá»§a loáº¡i sáº£n pháº©m,
    category: tÃªn cá»§a loáº¡i
    báº£ng Category cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Product
    + 1 category sáº½ cÃ³ nhiá»u product
- User: _id, username, password, fullname, email, id_permission
    + _id: id cá»§a khÃ¡ch hÃ ng,
    username: tÃªn Ä‘Äƒng nháº­p cá»§a khÃ¡ch hÃ ng,
    password: máº­t kháº©u Ä‘Äƒng nháº­p cá»§a khÃ¡ch hÃ ng,
    fullname: tÃªn cá»§a khÃ¡ch hÃ ng,
    email: email cá»§a khÃ¡ch hÃ ng,
    id_permission: id permission thuá»™c báº£ng Permission,
    báº£ng User cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Permission,
    báº£ng User cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Comment,
    báº£ng User cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Order,
    báº£ng User cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Favorite
    + 1 user sáº½ cÃ³ nhiá»u comment
    + 1 user sáº½ cÃ³ 1 permission
    + 1 user sáº½ cÃ³ nhiá»u favorite
    + 1 user sáº½ cÃ³ nhiá»u order
- Permission: _id, permission
    + _id: id cá»§a quyá»n,
    permission: tÃªn cá»§a quyá»n,
    báº£ng permission cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng user
    + 1 permission sáº½ cÃ³ nhiá»u user
- Order: _id, fullname, address, phone, total, status, id_user, id_payment, id_delivery
    + _id: id cá»§a Ä‘Æ¡n hÃ ng,
    fullname: tÃªn cá»§a ngÆ°á»i nháº­n hÃ ng,
    address: Ä‘á»‹a chá»‰ cá»§a ngÆ°á»i nháº­n hÃ ng,
    phone: sá»‘ Ä‘iá»‡n thoáº¡i cá»§a ngÆ°á»i nháº­n hÃ ng,
    total: tá»•ng tiá»n cá»§a Ä‘Æ¡n hÃ ng,
    status: tráº¡ng thÃ¡i cá»§a Ä‘Æ¡n hÃ ng Ä‘Ã³ (1 - ChÆ°a xÃ¡c nháº­n, 2 - ÄÃ£ xÃ¡c nháº­n, 3 - Äang váº­n chuyá»ƒn, 4 - HoÃ n thÃ nh, 5 - Há»§y Ä‘Æ¡n hÃ ng),
    id_user: id cá»§a khÃ¡ch hÃ ng,
    id_payment: id cá»§a phÆ°Æ¡ng thá»©c thanh toÃ¡n,
    id_delivery: id cá»§a phÆ°Æ¡ng thá»©c váº­n chuyá»ƒn,
    báº£ng Order cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng Detail_Order,
    báº£ng Order cÃ³ quan há»‡ má»™t má»™t vá»›i Delivery vÃ¬ há»‡ thÃ´ng chá»‰ cÃ³ 1 phÆ°Æ¡ng thá»©c váº­n chuyá»ƒn DRIVING,
    + Fullname, address, phone cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¹y chá»n phá»¥ thuá»™c vÃ o ngÆ°á»i nháº­n hÃ ng
    + 1 order sáº½ cÃ³ 1 delivery
    + 1 order sáº½ cÃ³ 1 payment
    + 1 order sáº½ cÃ³ nhiá»u detail_order
    + Nhiá»u order sáº½ thuá»™c 1 user
- Detail_Order: _id, price_product, name_product, count, size, id_order, id_product
    + _id: id cá»§a chi tiáº¿t Ä‘Æ¡n hÃ ng,
    price_product: giÃ¡ cá»§a sáº£n pháº©m,
    name_product: tÃªn cá»§a sáº£n pháº©m,
    count: sá»‘ lÆ°á»£ng cá»§a sáº£n pháº©m,
    size: kÃ­ch thÆ°á»›c cá»§a sáº£n pháº©m,
    id_order: id cá»§a Ä‘Æ¡n hÃ ng,
    id_product: id cá»§a sáº£n pháº©m,
    báº£ng detail_order sáº½ cÃ³ quan há»‡ má»™t má»™t vá»›i báº£ng product
    báº£ng detail_order sáº½ cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng order
    + Khi product mÃ¬nh thay Ä‘á»•i thÃ¬ bÃªn detail_order cÅ©ng sáº½ thay Ä‘á»•i nÃªn mÃ¬nh pháº£i thÃªm 2 trÆ°á»ng         name_product, price_product trÃ¡nh trÆ°á»ng há»£p Ä‘iá»u Ä‘Ã³ xáº£y ra.
    + 1 detail_order sáº½ cÃ³ 1 product
    + Nhiá»u detail_order sáº½ thuá»™c 1 order
- Payment: _id, pay_name,
    + _id: id cá»§a phÆ°Æ¡ng thá»©c thanh toÃ¡n,
    pay_name: tÃªn phÆ°Æ¡ng thá»©c thanh toÃ¡n,
    báº£ng payment sáº½ cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng order
    + 1 payment sáº½ cÃ³ nhiá»u order
- Comment: _id, content, star1, star2, star3, star4, star5, id_user, id_product,
    + _id: id cá»§a bÃ¬nh luáº­n,
    content: ná»™i dung cá»§a Ä‘Ã¡nh giÃ¡,
    star1, star2, star3, star4, star5: lÃ  sá»‘ sao mÃ  khÃ¡ch hÃ ng Ä‘Ã¡nh giÃ¡,
    id_user: id cá»§a khÃ¡ch hÃ ng mÃ  Ä‘Ã¡nh giÃ¡,
    id_product: id cá»§a sáº£n pháº©m Ä‘Ã¡nh giÃ¡,
    báº£ng comment sáº½ cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng product
    báº£ng comment sáº½ cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng user
    + Nhiá»u comment sáº½ thuá»™c 1 user
    + Nhiá»u comment sáº½ thuá»™c 1 product
- Favorite: _id, id_user, id_product
    + _id: lÃ  id cá»§a favorite,
    id_user: id cá»§a khÃ¡ch hÃ ng,
    id_product: id cá»§a sáº£n pháº©m
    báº£ng favorite sáº½ cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng product
    báº£ng favorite sáº½ cÃ³ quan há»‡ má»™t nhiá»u vá»›i báº£ng user
    + Nhiá»u favorite thuá»™c 1 product
    + Nhiá»u favorite thuá»™c 1 user
- Note: _id, fullname, phone
    + _id: id cá»§a phÆ°Æ¡ng thá»©c váº­n chuyá»‡n,
    fullname: tÃªn cá»§a ngÆ°á»i nháº­n hÃ ng,
    phone: Ä‘iá»‡n thoáº¡i cá»§a ngÆ°á»i nháº­n hÃ ng,
    báº£ng Note sáº½ cÃ³ quan há»‡ má»™t má»™t vá»›i báº£ng Order
    + 1 Note sáº½ thuá»™c 1 order

## API
## Root API Endpoint

`http://tienkim9920.herokuapp.com`

> âš ï¸ **LÆ°u Ã½:** API nÃ y Ä‘Ã£ **ngá»«ng hoáº¡t Ä‘á»™ng**. Endpoint chá»‰ dÃ¹ng Ä‘á»ƒ **minh há»a cÃ¡ch API hoáº¡t Ä‘á»™ng**.

```bash

- api/product : PRODUCT API ENDPOINT

    - router.get('/', Products.index)

    - router.get('/category', Products.category)

    - router.get('/:id', Products.detail)

    - router.get('/category/gender', Products.gender)

    - router.get('/category/pagination', Products.pagination)

    - router.get('/scoll/page', Products.scoll)
  
- api/user : USER API ENDPOINT

    - router.get('/', Users.index)

    - router.get('/:id', Users.user)

    - router.get('/detail/login', Users.detail)

    - router.post('/', Users.post_user)
   
- api/detail_order : DETAIL ORDER API ENDPOINT

    - router.get('/:id', Detail_Order.detail)

    - router.post('/', Detail_Order.post_detail_order)

- api/order : ORDER API ENDPOINT

    - router.get('/order/:id', Order.get_order)

    - router.get('/order/detail/:id', Order.get_detail)

    - router.post('/order', Order.post_order)

    - router.post('/email', Order.send_mail)

- api/delivery : DELIVERY API ENDPOINT

    - router.post('/', Delivery.post_delivery)

    - router.get('/:id', Delivery.get_delivery)

- api/comment : COMMENT API ENDPOINT

    - router.get('/:id', Comment.index)

    - router.post('/:id', Comment.post_comment)
    


```
## Get Started

# ğŸš€ HÆ°á»›ng dáº«n cÃ i Ä‘áº·t & káº¿t ná»‘i MongoDB Atlas

## 1ï¸âƒ£ Táº¡o Cluster trÃªn MongoDB Atlas  
- VÃ o [MongoDB Atlas](https://www.mongodb.com/atlas/database) â†’ ÄÄƒng nháº­p hoáº·c Ä‘Äƒng kÃ½.  
- Nháº¥n **Build a Database** â†’ chá»n gÃ³i Free (Shared Cluster).  
- Chá»n phiÃªn báº£n **MongoDB 5.5**.  
- Chá»n Region gáº§n báº¡n Ä‘á»ƒ cÃ³ tá»‘c Ä‘á»™ tá»‘t.  
- Nháº¥n **Create Cluster**.  

## 2ï¸âƒ£ Táº¡o Database vÃ  User  
- VÃ o **Database** â†’ **Collections** â†’ **Create Database**.  
  - Database name: `mydb` (thay tÃªn náº¿u muá»‘n).  
  - Collection name: vÃ­ dá»¥ `users`.  
- VÃ o **Database Access** â†’ **Add New Database User**.  
  - Username: `toantra349`.  
  - Password: `toantoan123` (nÃªn Ä‘áº·t password máº¡nh hÆ¡n).  
  - Chá»n quyá»n **Read and Write to any database**.  

## 3ï¸âƒ£ Láº¥y Connection URI  
- VÃ o **Database** â†’ **Connect** â†’ **Connect your application**.  
- Chá»n **Node.js** vÃ  copy connection string.  
- Sau Ä‘Ã³ thay cÃ¡c biáº¿n theo vÃ­ dá»¥ bÃªn dÆ°á»›i.

## 4ï¸âƒ£ Cáº¥u hÃ¬nh káº¿t ná»‘i trong `index.js` (server)  

```javascript
const USER = "toantra349"; // Thay báº±ng username báº¡n táº¡o
const PASS = encodeURIComponent("toantoan123"); // Thay báº±ng password báº¡n táº¡o
const DB = "mydb"; // TÃªn database
const HOST = "ktpm.dwb8wtz.mongodb.net"; // Host cá»§a cluster

const uri = `mongodb+srv://${USER}:${PASS}@${HOST}/${DB}?retryWrites=true&w=majority`;

const mongoose = require('mongoose');

mongoose.connect(uri)
  .then(() => console.log("âœ… Káº¿t ná»‘i MongoDB Atlas thÃ nh cÃ´ng"))
  .catch(err => console.error("âŒ Lá»—i káº¿t ná»‘i MongoDB Atlas:", err));
```

## ğŸ› ï¸ Cháº¡y dá»± Ã¡n trong thÆ° má»¥c `admin_app` vá»›i Docker

```bash
cd admin_app
```
```bash
docker run --rm -it ^
  -p 3001:3001 ^
  -v "%cd%":/app ^
  -w /app ^
  -e HOST=0.0.0.0 ^
  -e PORT=3001 ^
  -e CHOKIDAR_USEPOLLING=true ^
  -e WATCHPACK_POLLING=true ^
  -e BROWSER=none ^
  node:16-alpine sh -lc "npm install --no-audit --no-fund --legacy-peer-deps && npm start"


```
## ğŸ› ï¸ Cháº¡y dá»± Ã¡n trong thÆ° má»¥c `client_app` vá»›i Docker


```bash

cd client_app
```
```bash
docker run --rm -it ^
  -p 3000:3000 ^
  -e REACT_APP_API_URL=http://host.docker.internal:8000 ^
  -e CHOKIDAR_USEPOLLING=true ^
  -e WATCHPACK_POLLING=true ^
  -e HOST=0.0.0.0 ^
  -w /app ^
  -v "%cd%:/app" ^
  -v /app/node_modules ^
  node:16-alpine sh -lc "npm -v && node -v && ( [ -f package-lock.json ] && npm ci || npm install ) && npm start"

```


## Features
- Login, Register, Forgot Password, ResetPassword .
- CRUD Products, Users, Carts, Favorite, Order...
- Axios Products, Carts, Orders...
- Products url query (http://tienkim9920.herokuapp.com/api/product)
- Send email to user.
- Draw route between two location
- Payment on paypal
- Plugin Messenger of Facebook


## Technical details
- Nodejs, Reactjs.
- Express.
- Mongodb, Mongoose.
- Nodemailer. 
